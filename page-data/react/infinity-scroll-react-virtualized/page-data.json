{"componentChunkName":"component---src-templates-post-template-tsx","path":"/react/infinity-scroll-react-virtualized/","result":{"data":{"posts":{"edges":[{"node":{"fields":{"slug":"/react/infinity-scroll-react-virtualized/"},"html":"<blockquote>\n<p>타 사이트에서 블로그를 운영할 때 작성한 글을 이전했습니다. 🙂</p>\n</blockquote>\n<h2>들어가며</h2>\n<p>React 공식 문서에서 소개하는 <strong>react-virtualized 라이브러리를 사용한 무한 스크롤 최적화</strong> 포스팅입니다. <strong>windowing 기법</strong>과 <strong>크롬 개발자 도구를 활용한 성능 측정 방법</strong>에 대해 먼저 알아본 후 react-virtualized 라이브러리 사용 방법을 소개합니다.</p>\n<h2>1. react-virtualized 가 무엇인가요?</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e2d27729f14107bae21332d2b8c1a6db/dd9c5/react-virtualized-1.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 45.833333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAQBBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAeptQnUj/8QAFxAAAwEAAAAAAAAAAAAAAAAAAAMTIP/aAAgBAQABBQKKySiCsf/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAIDAQAAAAAAAAAAAAAAAAKRACAzMv/aAAgBAQAGPwLgVMxUzFU//8QAFxABAAMAAAAAAAAAAAAAAAAAEAEhwf/aAAgBAQABPyG/AyVD/9oADAMBAAIAAwAAABATD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB4QAAECBwEAAAAAAAAAAAAAABEAARAhMUGR0fDx/9oACAEBAAE/EHKFbqSM4fH0vKq6P//Z'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/e2d27729f14107bae21332d2b8c1a6db/a59e9/react-virtualized-1.webp 192w,\n/static/e2d27729f14107bae21332d2b8c1a6db/0ca9f/react-virtualized-1.webp 384w,\n/static/e2d27729f14107bae21332d2b8c1a6db/dc9b9/react-virtualized-1.webp 768w,\n/static/e2d27729f14107bae21332d2b8c1a6db/2bbcb/react-virtualized-1.webp 951w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/e2d27729f14107bae21332d2b8c1a6db/150b2/react-virtualized-1.jpg 192w,\n/static/e2d27729f14107bae21332d2b8c1a6db/6985d/react-virtualized-1.jpg 384w,\n/static/e2d27729f14107bae21332d2b8c1a6db/19de6/react-virtualized-1.jpg 768w,\n/static/e2d27729f14107bae21332d2b8c1a6db/dd9c5/react-virtualized-1.jpg 951w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/e2d27729f14107bae21332d2b8c1a6db/19de6/react-virtualized-1.jpg\"\n            alt=\"react-virtualized-1\"\n            title=\"react-virtualized-1\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>react-virtualized 란 React 공식 문서 <a href=\"https://ko.reactjs.org/docs/optimizing-performance.html\" target=\"_blank\" rel=\"nofollow\">성능 최적화 페이지</a>에서 소개하는 두 개의 라이브러리 중 하나입니다.</p>\n<blockquote>\n<p>react-virtualized 를 널리 알려진 windowing 라이브러리라고 소개하고 있습니다.</p>\n</blockquote>\n<p>여기서 <strong>windowing 기법</strong>이란 무엇일까요?</p>\n<p>React 공식 문서에는 이렇게 적혀 있습니다.</p>\n<blockquote>\n<p>주어진 시간에 목록의 부분 목록만 렌더링하며 컴포넌트를 다시 렌더링하는 데 걸리는 시간과 생성된 DOM 노드의 수를 크게 줄일 수 있습니다.</p>\n</blockquote>\n<p>windowing 기법에 대해 조금 더 자세히 알아보겠습니다.</p>\n<h3>1-1. windowing 기법</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/39107a6bcd5a0c09c1f280332bbbc9f0/62aaf/react-virtualized-2.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.29166666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIBAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB2otVHAX/xAAZEAACAwEAAAAAAAAAAAAAAAAAAQIQESH/2gAIAQEAAQUCmSXTDFX/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAVEAEBAAAAAAAAAAAAAAAAAAABIP/aAAgBAQAGPwIa/8QAGhABAQACAwAAAAAAAAAAAAAAAQAxURARIf/aAAgBAQABPyEekYZOCNRqg6xf/9oADAMBAAIAAwAAABDXz//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAEDAQE/EIf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAZEAEBAQEBAQAAAAAAAAAAAAABEQAhUTH/2gAIAQEAAT8QYSLFnjlCF4dx8zaovuswBBDf/9k='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/39107a6bcd5a0c09c1f280332bbbc9f0/a59e9/react-virtualized-2.webp 192w,\n/static/39107a6bcd5a0c09c1f280332bbbc9f0/0ca9f/react-virtualized-2.webp 384w,\n/static/39107a6bcd5a0c09c1f280332bbbc9f0/dc9b9/react-virtualized-2.webp 768w,\n/static/39107a6bcd5a0c09c1f280332bbbc9f0/e2c2f/react-virtualized-2.webp 1152w,\n/static/39107a6bcd5a0c09c1f280332bbbc9f0/94b1e/react-virtualized-2.webp 1280w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/39107a6bcd5a0c09c1f280332bbbc9f0/150b2/react-virtualized-2.jpg 192w,\n/static/39107a6bcd5a0c09c1f280332bbbc9f0/6985d/react-virtualized-2.jpg 384w,\n/static/39107a6bcd5a0c09c1f280332bbbc9f0/19de6/react-virtualized-2.jpg 768w,\n/static/39107a6bcd5a0c09c1f280332bbbc9f0/4472f/react-virtualized-2.jpg 1152w,\n/static/39107a6bcd5a0c09c1f280332bbbc9f0/62aaf/react-virtualized-2.jpg 1280w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/39107a6bcd5a0c09c1f280332bbbc9f0/19de6/react-virtualized-2.jpg\"\n            alt=\"react-virtualized-2\"\n            title=\"react-virtualized-2\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p><em>사진 출처: <a href=\"https://www.patterns.dev/posts/virtual-lists/\" target=\"_blank\" rel=\"noreferrer noopener\" aria-label=\"sitemap-vs-website\">patterns.dev</a></em></p>\n<p>많은 데이터를 list 로 만들고 초기 렌더링에 모든 데이터를 불러오려면 굉장히 오랜 시간이 걸립니다. 사용자로서 긴 렌더링 시간이 불편하게 느껴질 수 있습니다.</p>\n<blockquote>\n<p>이를 해결하기 위해서 <strong>list 중 viewport 에 보이는 부분만 렌더링하고 나머지는 스크롤 할 때 보이도록 하는 것</strong>을 권장합니다.</p>\n</blockquote>\n<p>그리고 이 방법을 windowing 기법이라고 합니다.</p>\n<h3>1-2. react-virtualized 를 선택한 이유</h3>\n<p>위에서 react-virtualized 에 대해 작성할 때 React 공식 문서에서 소개하는 두 개의 라이브러리 중 하나라고 했는데, 다른 하나는 react-window 라이브러리입니다. 이 포스팅에서 react-window 가 아닌 react-virtualized 를 다루는 이유는 다음과 같습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/06e0c54c72fcfc2a4f8c19b16bf509a9/5fb21/react-virtualized-3.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 86.45833333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAARABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe9QIKDIP//EABYQAAMAAAAAAAAAAAAAAAAAAAIwMf/aAAgBAQABBQJAz//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BH//EABQQAQAAAAAAAAAAAAAAAAAAADD/2gAIAQEABj8CH//EABkQAQACAwAAAAAAAAAAAAAAAAEAERAgMf/aAAgBAQABPyHUpLM8Z//aAAwDAQACAAMAAAAQA8A8/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPxAf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPxAf/8QAHBAAAgICAwAAAAAAAAAAAAAAAAERQSExEFGh/9oACAEBAAE/EIh79E8WbMdkoaUJp2mKx3xv/9k='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/06e0c54c72fcfc2a4f8c19b16bf509a9/a59e9/react-virtualized-3.webp 192w,\n/static/06e0c54c72fcfc2a4f8c19b16bf509a9/0ca9f/react-virtualized-3.webp 384w,\n/static/06e0c54c72fcfc2a4f8c19b16bf509a9/dc9b9/react-virtualized-3.webp 768w,\n/static/06e0c54c72fcfc2a4f8c19b16bf509a9/e2c2f/react-virtualized-3.webp 1152w,\n/static/06e0c54c72fcfc2a4f8c19b16bf509a9/f80fb/react-virtualized-3.webp 1266w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/06e0c54c72fcfc2a4f8c19b16bf509a9/150b2/react-virtualized-3.jpg 192w,\n/static/06e0c54c72fcfc2a4f8c19b16bf509a9/6985d/react-virtualized-3.jpg 384w,\n/static/06e0c54c72fcfc2a4f8c19b16bf509a9/19de6/react-virtualized-3.jpg 768w,\n/static/06e0c54c72fcfc2a4f8c19b16bf509a9/4472f/react-virtualized-3.jpg 1152w,\n/static/06e0c54c72fcfc2a4f8c19b16bf509a9/5fb21/react-virtualized-3.jpg 1266w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/06e0c54c72fcfc2a4f8c19b16bf509a9/19de6/react-virtualized-3.jpg\"\n            alt=\"react-virtualized-3\"\n            title=\"react-virtualized-3\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<blockquote>\n<p>react-virtualized 사용자</p>\n</blockquote>\n<p>위 사진은 최근 6개월 동안 react-virtualized 와 react-window 의 다운로드 횟수를 나타낸 것입니다. react-virtualized 패키지의 사용자가 더 많은 것을 확인할 수 있습니다. 또한, react-virtualized 에는 react-window 에 없는 기능이 있는데 그중 두 가지는 아래와 같습니다.</p>\n<blockquote>\n<p>window 스크롤</p>\n</blockquote>\n<p>react-window 는 컨테이너의 너비와 높이를 명시적으로 지정하여 해당 컨테이너 내에서만 가상화가 가능합니다. react-virtualized 의 WindowScroller 컴포넌트를 사용하면 페이스북이나 트위터처럼 <strong>window 스크롤을 기준으로 목록이 가상화되도록 구현</strong>할 수 있습니다.</p>\n<blockquote>\n<p>요소의 동적인 height 측정</p>\n</blockquote>\n<p>콘텐츠형 광고 페이지 내에서 렌더링 되는 요소의 <code>height</code>값은 요소의 내용에 따라 변하기 때문에 동적인 <code>height</code>을 측정할 수 있어야 합니다. react-window 는 요소의 동적인 <code>height</code>값을 측정할 방법이 없지만, react-virtualized 에서 <code>CellMeasurer</code>라는 컴포넌트는 <strong>원하는 요소의 동적인 height 값을 측정</strong>해주는 역할을 담당하고 있습니다. 동적인 height 값에 대해서는 <a href=\"http://bvaughn.github.io/react-virtualized/##/components/List\" target=\"_blank\" rel=\"nofollow\">react-virtualized</a> 링크에서 확인할 수 있습니다.</p>\n<blockquote>\n<p>그러나 위 사진의 size 항목에서 확인할 수 있는 거처럼 react-window 가 react-virtualized 보다 훨씬 작아서 추가적인 기능을 사용하지 않는다면 react-window 사용을 권장하기도 합니다.</p>\n</blockquote>\n<h2>2. 크롬 개발자 도구로 성능 측정하는 방법</h2>\n<p>성능을 분석해야 할 때는 느려졌다는 느낌이 아니라 정확히 몇 초가 걸리는지 확인이 필요합니다. 크롬 개발자 도구의 <strong>Performance 탭</strong>으로 이를 측정할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9dcc3f46329a5d0b8a81e4d73ce0c6bf/aaf92/react-virtualized-4.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.958333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHZpWiGL//EABcQAAMBAAAAAAAAAAAAAAAAAAAREiD/2gAIAQEAAQUCkQsf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFxABAAMAAAAAAAAAAAAAAAAAEQEgkf/aAAgBAQAGPwJZ23//xAAaEAACAgMAAAAAAAAAAAAAAAABEQAQITFR/9oACAEBAAE/IVgEiMKDtUNV/9oADAMBAAIAAwAAABDkz//EABcRAQADAAAAAAAAAAAAAAAAAAEQETH/2gAIAQMBAT8QCsj/xAAWEQADAAAAAAAAAAAAAAAAAAABECH/2gAIAQIBAT8QNX//xAAcEAACAgIDAAAAAAAAAAAAAAABEQAhMVEQcZH/2gAIAQEAAT8QtzW0y8gJR3cIBmOwSOMEZ3P/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/9dcc3f46329a5d0b8a81e4d73ce0c6bf/a59e9/react-virtualized-4.webp 192w,\n/static/9dcc3f46329a5d0b8a81e4d73ce0c6bf/0ca9f/react-virtualized-4.webp 384w,\n/static/9dcc3f46329a5d0b8a81e4d73ce0c6bf/dc9b9/react-virtualized-4.webp 768w,\n/static/9dcc3f46329a5d0b8a81e4d73ce0c6bf/e2c2f/react-virtualized-4.webp 1152w,\n/static/9dcc3f46329a5d0b8a81e4d73ce0c6bf/f3efb/react-virtualized-4.webp 1536w,\n/static/9dcc3f46329a5d0b8a81e4d73ce0c6bf/0b34d/react-virtualized-4.webp 1920w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/9dcc3f46329a5d0b8a81e4d73ce0c6bf/150b2/react-virtualized-4.jpg 192w,\n/static/9dcc3f46329a5d0b8a81e4d73ce0c6bf/6985d/react-virtualized-4.jpg 384w,\n/static/9dcc3f46329a5d0b8a81e4d73ce0c6bf/19de6/react-virtualized-4.jpg 768w,\n/static/9dcc3f46329a5d0b8a81e4d73ce0c6bf/4472f/react-virtualized-4.jpg 1152w,\n/static/9dcc3f46329a5d0b8a81e4d73ce0c6bf/d58d1/react-virtualized-4.jpg 1536w,\n/static/9dcc3f46329a5d0b8a81e4d73ce0c6bf/aaf92/react-virtualized-4.jpg 1920w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/9dcc3f46329a5d0b8a81e4d73ce0c6bf/19de6/react-virtualized-4.jpg\"\n            alt=\"react-virtualized-4\"\n            title=\"react-virtualized-4\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>녹화 버튼을 클릭한 후, 할 일 목록에 체크하고 화면에 변화가 반영되면 Stop 버튼을 누릅니다.</p>\n<blockquote>\n<p>성능 분석 결과에 나타나는 Timings 를 열어 보면 각 시간대에 컴포넌트의 어떤 작업이 처리되었는지 확인할 수 있습니다.</p>\n</blockquote>\n<p>App [update] 박스를 열어 작업 처리 시간을 확인했습니다. 2500개의 데이터가 있는데 1.4초가 걸린다는 것은 성능이 매우 나쁘다는 의미입니다. 최적화를 한 이후 이 성능을 비교해보겠습니다.</p>\n<h2>3. react-virtualized 사용 방법</h2>\n<h3>3-1. 패키지 설치</h3>\n<p>우선 yarn 을 통해 react-virtualized 를 설치하겠습니다.</p>\n<deckgo-highlight-code language=\"shell\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">yarn add react-virtualized</code>\n        </deckgo-highlight-code>\n<p>이제 react-virtualized 에서 제공하는 List 컴포넌트를 사용하여 To Do List 컴포넌트 성능 최적화를 하겠습니다.</p>\n<h3>3-2. 각 항목의 px 단위 측정하기</h3>\n<p>최적화를 수행하기 전에 필요한 작업은 각 항목의 실제 크기를 px 단위로 알아내는 것입니다. <strong>크롬 개발자 도구</strong>를 통해 이 크기를 쉽게 알아낼 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/55e1bd57db1fd2954099316ed0f6d866/aaf92/react-virtualized-5.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.958333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHs6RaFF//EABcQAAMBAAAAAAAAAAAAAAAAAAEQEiD/2gAIAQEAAQUCnAX/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAEBAQAAAAAAAAAAAAAAAAARASD/2gAIAQEABj8CW6//xAAbEAABBQEBAAAAAAAAAAAAAAARAAEQITFRkf/aAAgBAQABPyHfgKbiFWwjUf/aAAwDAQACAAMAAAAQPw//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPxAAn//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EAB0QAAICAQUAAAAAAAAAAAAAAAERADEhEFFhcZH/2gAIAQEAAT8QAtnt5V5Bb4CBgIS2vSzoQ3P/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/55e1bd57db1fd2954099316ed0f6d866/a59e9/react-virtualized-5.webp 192w,\n/static/55e1bd57db1fd2954099316ed0f6d866/0ca9f/react-virtualized-5.webp 384w,\n/static/55e1bd57db1fd2954099316ed0f6d866/dc9b9/react-virtualized-5.webp 768w,\n/static/55e1bd57db1fd2954099316ed0f6d866/e2c2f/react-virtualized-5.webp 1152w,\n/static/55e1bd57db1fd2954099316ed0f6d866/f3efb/react-virtualized-5.webp 1536w,\n/static/55e1bd57db1fd2954099316ed0f6d866/0b34d/react-virtualized-5.webp 1920w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/55e1bd57db1fd2954099316ed0f6d866/150b2/react-virtualized-5.jpg 192w,\n/static/55e1bd57db1fd2954099316ed0f6d866/6985d/react-virtualized-5.jpg 384w,\n/static/55e1bd57db1fd2954099316ed0f6d866/19de6/react-virtualized-5.jpg 768w,\n/static/55e1bd57db1fd2954099316ed0f6d866/4472f/react-virtualized-5.jpg 1152w,\n/static/55e1bd57db1fd2954099316ed0f6d866/d58d1/react-virtualized-5.jpg 1536w,\n/static/55e1bd57db1fd2954099316ed0f6d866/aaf92/react-virtualized-5.jpg 1920w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/55e1bd57db1fd2954099316ed0f6d866/19de6/react-virtualized-5.jpg\"\n            alt=\"react-virtualized-5\"\n            title=\"react-virtualized-5\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>각 항목의 크기는 가로 <code>495px</code>, 세로 <code>57px</code>입니다. 여기서 첫 번째 항목이 아니라 두 번째 항목을 확인하는 이유는 테두리가 포함된 값을 알아내기 위해서입니다.</p>\n<h3>3-3. 코드 수정하기</h3>\n<blockquote>\n<p>예시 코드 구조</p>\n</blockquote>\n<deckgo-highlight-code  terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">src\n ┣ components\n ┃ ┣ TodoInsert.js\n ┃ ┣ TodoInsert.scss\n ┃ ┣ TodoList.js\n ┃ ┣ TodoList.scss\n ┃ ┣ TodoListItem.js\n ┃ ┣ TodoListItem.scss\n ┃ ┣ TodoTemplate.js\n ┃ ┗ TodoTemplate.scss\n ┣ App.css\n ┣ App.js\n ┣ App.test.js\n ┣ index.css\n ┣ index.js\n ┣ logo.svg\n ┗ serviceWorker.js</code>\n        </deckgo-highlight-code>\n<blockquote>\n<p>수정 전 To Do List 코드</p>\n</blockquote>\n<deckgo-highlight-code language=\"js\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">import React from &#39;react&#39;;\nimport TodoListItem from &#39;./TodoListItem&#39;;\nimport &#39;./TodoList.scss&#39;;\n\nconst TodoList = ({ todos, onRemove, onToggle }) =&gt; {\n  return (\n    &lt;div className=&quot;TodoList&quot;&gt;\n      {todos.map(todo =&gt; (\n        &lt;TodoListItem\n          todo={todo}\n          key={todo.id}\n          onRemove={onRemove}\n          onToggle={onToggle}\n        /&gt;\n      ))}\n    &lt;/div&gt;\n  );\n};\n\nexport default TodoList;</code>\n        </deckgo-highlight-code>\n<blockquote>\n<p>react-virtualized 를 적용한 To Do List 코드</p>\n</blockquote>\n<ul>\n<li>\n<p><code>useCallback</code>과 <code>memo</code>로 최적화를 한 이후에 react-virtualized 를 적용한 코드입니다.</p>\n</li>\n<li>\n<p>react-virtualized 관련 내용은 <code>return</code>문의 <code>List</code>컴포넌트입니다.</p>\n</li>\n</ul>\n<deckgo-highlight-code language=\"js\" terminal=\"carbon\" theme=\"seti\"  >\n          <code slot=\"code\">import React, { useCallback } from &#39;react&#39;;\nimport { List } from &#39;react-virtualized&#39;;\nimport TodoListItem from &#39;./TodoListItem&#39;;\nimport &#39;./TodoList.scss&#39;;\n\nconst TodoList = ({ todos, onRemove, onToggle }) =&gt; {\n  const rowRenderer = useCallback(\n    ({ index, key, style }) =&gt; {\n      const todo = todos[index];\n      return (\n        &lt;TodoListItem\n          todo={todo}\n          key={key}\n          onRemove={onRemove}\n          onToggle={onToggle}\n          style={style}\n        /&gt;\n      );\n    },\n    [onRemove, onToggle, todos],\n  );\n  return (\n    &lt;List\n      className=&quot;TodoList&quot;\n      width={495} // 전체 크기\n      height={513} // 전체 높이\n      rowCount={todos.length} // 항목 개수\n      rowHeight={57} // 항목 높이\n      rowRenderer={rowRenderer} // 항목을 렌더링할 때 쓰는 함수\n      list={todos} // 배열\n      style={{ outline: &#39;none&#39; }} // List에 기본 적용되는 outline 스타일 제거\n    /&gt;\n  );\n};\n\nexport default React.memo(TodoList);</code>\n        </deckgo-highlight-code>\n<p><code>List</code>컴포넌트를 사용하기 위해 <code>rowRenderer</code>라는 함수를 새로 작성했습니다. 이 함수는 react-virtualized 의 <code>List</code>컴포넌트에서 각 To Do Item을 렌더링할 때 사용하며, 이 함수를 <code>List</code>컴포넌트의 <code>props</code>값으로 설정해야 합니다. 이 함수는 파라미터에 <code>index</code>, <code>key</code>, <code>style</code>값을 객체 타입으로 받아 와서 사용합니다.</p>\n<blockquote>\n<p>List 컴포넌트를 사용할 때는 <strong>해당 리스트의 전체 크기와 각 항목의 높이, 각 항목을 렌더링할 때 사용해야 하는 함수, 그리고 배열</strong>을 <code>props</code>로 넣어 주어야 합니다.</p>\n</blockquote>\n<p>그러면 이 컴포넌트가 전달받은 <code>props</code>를 사용하여 자동으로 최적화를 해줍니다.</p>\n<h3>3-4. 최적화 이후 성능 비교</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/342126b3ae71c86566eee668f33cc664/aaf92/react-virtualized-6.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.958333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHZpWiGL//EABcQAAMBAAAAAAAAAAAAAAAAAAAREiD/2gAIAQEAAQUCkQsf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFxABAAMAAAAAAAAAAAAAAAAAEQEgkf/aAAgBAQAGPwJZ23//xAAaEAACAgMAAAAAAAAAAAAAAAAAERAhQXHR/9oACAEBAAE/IVfALo0jEf/aAAwDAQACAAMAAAAQ58//xAAWEQEBAQAAAAAAAAAAAAAAAAABEBH/2gAIAQMBAT8QDJ//xAAWEQADAAAAAAAAAAAAAAAAAAABECH/2gAIAQIBAT8QNX//xAAcEAACAgIDAAAAAAAAAAAAAAABEQBREDFBkaH/2gAIAQEAAT8QtVtN4hICBAvlxadnA0jNz//Z'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/342126b3ae71c86566eee668f33cc664/a59e9/react-virtualized-6.webp 192w,\n/static/342126b3ae71c86566eee668f33cc664/0ca9f/react-virtualized-6.webp 384w,\n/static/342126b3ae71c86566eee668f33cc664/dc9b9/react-virtualized-6.webp 768w,\n/static/342126b3ae71c86566eee668f33cc664/e2c2f/react-virtualized-6.webp 1152w,\n/static/342126b3ae71c86566eee668f33cc664/f3efb/react-virtualized-6.webp 1536w,\n/static/342126b3ae71c86566eee668f33cc664/0b34d/react-virtualized-6.webp 1920w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/342126b3ae71c86566eee668f33cc664/150b2/react-virtualized-6.jpg 192w,\n/static/342126b3ae71c86566eee668f33cc664/6985d/react-virtualized-6.jpg 384w,\n/static/342126b3ae71c86566eee668f33cc664/19de6/react-virtualized-6.jpg 768w,\n/static/342126b3ae71c86566eee668f33cc664/4472f/react-virtualized-6.jpg 1152w,\n/static/342126b3ae71c86566eee668f33cc664/d58d1/react-virtualized-6.jpg 1536w,\n/static/342126b3ae71c86566eee668f33cc664/aaf92/react-virtualized-6.jpg 1920w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/jpeg\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/342126b3ae71c86566eee668f33cc664/19de6/react-virtualized-6.jpg\"\n            alt=\"react-virtualized-6\"\n            title=\"react-virtualized-6\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<blockquote>\n<p>최적화 이전에는 1.4초가 걸렸지만, 최적화 이후 11ms(0.011초) 가 걸리는 것을 확인할 수 있습니다. 👍</p>\n</blockquote>\n<p>현재 다룬 예시는 react-virtualized 만 적용했을 때 최적화 성능은 아니지만, 다른 예시를 통해 최적화 적용 순서대로 성능을 측정했을 때는 다음과 같습니다.</p>\n<ul>\n<li>\n<p>최적화 적용 전 코드: 1.02초</p>\n</li>\n<li>\n<p>React.memo 적용 코드: 0.059초</p>\n</li>\n<li>\n<p>react-virtualized 적용 코드: 0.005초</p>\n</li>\n</ul>\n<h2>마치며</h2>\n<p>react-virtualized 사용 방법에 대해 알아봤습니다. 리액트 컴포넌트의 렌더링은 기본적으로 빨라서 컴포넌트를 개발할 때 최적화 작업에 대해 너무 큰 스트레스를 받거나 모든 컴포넌트에 일일이 React.memo 를 작성할 필요는 없습니다. 단, 리스트와 관련된 컴포넌트를 만들 때 보여 줄 항목이 100개 이상이고 업데이트가 자주 발생한다면, 최적화가 필요합니다.</p>\n<hr>\n<p>참고 자료 📩</p>\n<ul>\n<li><a href=\"https://ko.reactjs.org/docs/optimizing-performance.html\" target=\"_blank\" rel=\"nofollow\">성능 최적화 – React</a></li>\n<li><a href=\"https://book.naver.com/bookdb/book_detail.nhn?bid=15372757\" target=\"_blank\" rel=\"nofollow\">리액트를 다루는 기술 : 네이버 도서</a></li>\n<li><a href=\"https://blog.bitsrc.io/10-ways-to-optimize-your-react-apps-performance-e5e437c9abce\" target=\"_blank\" rel=\"nofollow\">10 Ways to Optimize Your React App’s Performance | by Chidume Nnamdi 🔥💻🎵🎮 | Bits and Pieces</a></li>\n</ul>","timeToRead":6,"frontmatter":{"title":"react-virtualized를 사용한 무한 스크롤 최적화","summary":"react-virtualized 라이브러리를 사용한 무한 스크롤 최적화 방법입니다. windowing 기법과 개발자 도구를 활용한 성능 측정 방법도 포함하고 있습니다.","date":"2021-05-30","category":"React","thumbnail":{"publicURL":"/static/0f19a69f3c228eb132b76c674c06341b/thumbnail.jpeg"}}}}]}},"pageContext":{"slug":"/react/infinity-scroll-react-virtualized/"}},"staticQueryHashes":["1663765485","2170400879","3026479947","4290078607"]}